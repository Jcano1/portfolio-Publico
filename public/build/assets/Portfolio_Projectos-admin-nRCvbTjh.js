const n=document.getElementById("modal"),g=document.getElementById("btAddProjectos"),I=document.getElementById("closeModal"),L=document.getElementById("cancelar");document.getElementById("formProyecto");g.addEventListener("click",()=>{n.classList.remove("hidden")});I.addEventListener("click",()=>{n.classList.add("hidden")});L.addEventListener("click",()=>{n.classList.add("hidden")});n.addEventListener("click",s=>{s.target===n&&n.classList.add("hidden")});let a=null;document.addEventListener("projectsLoaded",function(s){const i=document.querySelectorAll("#ContainerButonDeleteProyect button"),l=document.getElementById("modal-confirm-delete"),m=document.getElementById("closeDeleteModal"),E=document.getElementById("cancelDelete"),u=document.getElementById("confirmDelete"),r=document.getElementById("projectIdToDelete"),c=()=>{l.classList.add("hidden")};i.forEach(t=>{t.addEventListener("click",o=>{o.stopPropagation(),o.preventDefault(),console.log("âœ… Â¡AcciÃ³n de administrador sobre un botÃ³n! El enlace NO DEBE FUNCIONAR.");const d=t.closest("a");if(!d)return;a=t.closest("a");const e=d.getAttribute("href").split("/").pop();r.value=e,l.classList.remove("hidden"),console.log(`Modal abierto para el Proyecto ID: ${e}`)})}),m.addEventListener("click",c),E.addEventListener("click",c),l.addEventListener("click",t=>{t.target.id==="modal-confirm-delete"&&c()}),u.addEventListener("click",()=>{const t=r.value;if(t){const o=document.querySelector('meta[name="csrf-token"]').content;console.log(o);const d=`/api/Proyecto/Delete/${t}`;console.log(`ðŸ”¥ INICIANDO BORRADO DEL PROYECTO ID: ${t}`),fetch(d,{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":o}}).then(e=>e.json()).then(e=>{e.success?console.log(e.message):console.error("Error al borrar:",e.message)}).catch(e=>console.error("Error de conexiÃ³n:",e)),setTimeout(()=>{c(),a.remove()},500)}})});
