const n=document.getElementById("ContainerProjectos");let a=!1,c,l,s=!1;n.addEventListener("mousedown",e=>{e.button===0&&(a=!0,s=!1,n.classList.add("grabbing"),c=e.pageX-n.offsetLeft,l=n.scrollLeft)});n.addEventListener("mouseleave",()=>{a=!1,n.classList.remove("grabbing")});n.addEventListener("mouseup",e=>{if(n.classList.remove("grabbing"),s){e.preventDefault();const r=e.target.closest("a");r&&(r.onclick=t=>t.preventDefault(),setTimeout(()=>r.onclick=null,0))}a=!1});n.addEventListener("mousemove",e=>{if(!a||e.buttons!==1)return;e.preventDefault();const t=e.pageX-n.offsetLeft-c;Math.abs(t)>5&&(s=!0),n.scrollLeft=l-t});function u(e){const t=document.querySelector("#Plantilla-proyectos").content.cloneNode(!0);return console.log(e),t.querySelector(".Titulo-Proyecto").textContent=e.title,e.imagen&&(t.querySelector(".card-image").innerHTML=`<img src="/storage/${e.imagen.ruta}" alt=""  class="card-img" draggable="false" />`),t.querySelector(".Descripción-Proyecto").innerHTML=e.ShortDescription,t.querySelector("a").setAttribute("href",`/Proyectos/${e.id}`),t}function i(){fetch("/Proyectos").then(e=>e.json()).then(e=>{const r=document.querySelector("#ContainerProjectos");if(!e||e.length===0){r.innerHTML="<p class='text-gray-500'>No hay proyectos todavía.</p>";return}r.innerHTML="",e.forEach(o=>{r.appendChild(u(o))});const t=new CustomEvent("projectsLoaded",{detail:{count:e.length}});document.dispatchEvent(t),document.addEventListener("dragstart",o=>{o.target.tagName==="a"&&o.preventDefault()})}).catch(e=>console.error("❌ Error cargando proyectos:",e))}window.CargarProyectos=i;i();
