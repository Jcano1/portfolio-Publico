import{O as S,g as I,S as A,s as T,a as R}from"./Button-Dk0pEh2a.js";import{o as q,g as M}from"./Text-Chpbee58.js";import{O as N,u as H,a as W}from"./Image-DM5693sl.js";import{O as k,G as D}from"./Separator-BNvfE2em.js";import{f as Y,s as J}from"./JsonSave-yEZclrDW.js";import"./Helper-Ct59Lgux.js";document.addEventListener("DOMContentLoaded",()=>{let l=null,a=null;const j=document.getElementById("btAddProjectos"),p=document.getElementById("modal-opciones_columna"),m=document.getElementById("modal-editor"),O=document.getElementById("closeEditor"),u=document.getElementById("editor-form"),_=document.getElementById("cancelEditor"),b=document.getElementById("saveEditor"),w=document.getElementById("closeModal");let c=null;const f=document.getElementById("modal-opciones_diseÃ±o");document.getElementById("closeModal_diseÃ±o").addEventListener("click",()=>{f.classList.add("hidden"),E(),c=null}),f.addEventListener("mousedown",e=>{e.target===f&&(f.classList.add("hidden"),E(),c=null)}),_.addEventListener("click",()=>{m.classList.add("hidden"),f.classList.add("hidden"),E(),c=null}),O.addEventListener("mousedown",()=>{m.classList.add("hidden"),f.classList.add("hidden"),E(),c=null}),m.addEventListener("mousedown",e=>{e.target===m&&(m.classList.add("hidden"),f.classList.add("hidden"),E(),c=null)}),j.addEventListener("click",()=>{p.classList.remove("hidden")}),w.addEventListener("click",()=>{p.classList.add("hidden")}),p.addEventListener("mousedown",e=>{e.target===p&&p.classList.add("hidden")});function E(){a=null,l=null,u.innerHTML="",b.textContent="Guardar"}const F=document.getElementById("Container-pagina"),$=document.getElementById("Select-button-1"),G=document.getElementById("Select-button-2"),P=document.getElementById("Select-button-3");let g=0;document.querySelectorAll("#modal-opciones_diseÃ±o div[data-type]").forEach(e=>{e.addEventListener("click",()=>{a=e.dataset.type,u.innerHTML="",a==="text"?q(u):a==="image"?N(u):a==="button"?S(u):a==="separator"&&k(u),m.classList.remove("hidden")})});function U(){document.querySelectorAll(".caja-proyecto").forEach(e=>{let o=0;g++,e.appendChild(x(e)),e.querySelectorAll(".Column-Container").forEach(n=>{n.innerHTML=n.innerHTML+`<div class="w-[100%]  text-white p-6 rounded-xl">
                    <div id="ContainerForm">
                        <div class="flex flex-col items-center justify-center border-2 border-dashed border-[#315F68] rounded-xl p-6 cursor-pointer hover:bg-[#315F68]/20 transition"
                            id="btAddOpciones${g}-${o}">
                            <span class="text-4xl font-bold text-[#315F68]">+</span>
                            <span class="mt-2 text-sm font-semibold text-[#315F68]">opciones</span>
                        </div>
                    </div>
                </div>`,n.querySelector(`#btAddOpciones${g}-${o}`).addEventListener("click",()=>{c=n,f.classList.remove("hidden")}),c=n,e.appendChild(n);let t=n.querySelector(".Container_Data");if(!t){t=document.createElement("div"),t.className="Container_Data flex flex-col justify-center items-center gap-4 mb-4";const r=n.querySelector('[id^="btAddOpciones"]');n.insertBefore(t,r.parentElement.parentElement)}n.querySelectorAll(".item-proyecto").forEach(r=>{let i=J(r);r.appendChild(h(r,i.type)),L(r);var d=r.querySelector("button");d&&(d.getAttribute("href")&&d.getAttribute("href")!="//"?T(d):d.getAttribute("data-id")&&d.getAttribute("data-id")!="0"&&A(d))})})})}U();function y(e){g++;const o=document.createElement("div");o.className="caja-proyecto ",o.style.gridTemplateColumns=`repeat(${e}, 1fr)`,o.appendChild(x(o));for(let n=1;n<=e;n++){const t=document.createElement("div");t.className="rounded-md Column-Container",t.id=`${g}-${n}`,t.innerHTML=`
            <div class="w-[100%]  text-white p-6 rounded-xl">
                <div id="ContainerForm">
                    <div class="flex flex-col items-center justify-center border-2 border-dashed border-[#315F68] rounded-xl p-6 cursor-pointer hover:bg-[#315F68]/20 transition"
                        id="btAddOpciones${g}-${n}">
                        <span class="text-4xl font-bold text-[#315F68]">+</span>
                        <span class="mt-2 text-sm font-semibold text-[#315F68]">opciones</span>
                    </div>
                </div>
            </div>
        `,p.classList.add("hidden"),t.querySelector(`#btAddOpciones${g}-${n}`).addEventListener("click",()=>{c=t,f.classList.remove("hidden")}),o.appendChild(t);let r=t.querySelector(".Container_Data");if(!r){r=document.createElement("div"),r.className="Container_Data flex flex-col justify-center items-center gap-4 mb-4";const i=t.querySelector('[id^="btAddOpciones"]');t.insertBefore(r,i.parentElement.parentElement)}}F.appendChild(o)}function L(e){if(!c)return;let o=c.querySelector(".Container_Data");if(!o){o=document.createElement("div"),o.className="Container_Data flex flex-col justify-center items-center gap-4 mb-4";const n=c.querySelector('[id^="btAddOpciones"]');c.insertBefore(o,n.parentElement.parentElement)}o.appendChild(e)}b.addEventListener("click",e=>{if(e.preventDefault(),l){if(a==="text")l.innerHTML=M();else if(a==="image"){const i=document.getElementById("inputImagen").files[0],d=document.getElementById("inputWidth").value;var o=l;H(i,d,l).then(s=>{o.innerHTML=s||""}).catch(s=>{l.innerHTML='<div class="error">Error al subir imagen</div>',console.error(s)})}else a==="button"?l.innerHTML=I().outerHTML:a==="separator"&&(l.innerHTML=D());m.classList.add("hidden"),l=null;return}let n=document.createElement("div");n.className="item-proyecto relative group w-full flex justify-center";let t=document.createElement("div");if(t.className="contenido w-full",a==="text")t.innerHTML=M();else if(a==="image"){const i=document.getElementById("inputImagen").files[0],d=document.getElementById("inputWidth").value;H(i,d).then(s=>{t.innerHTML=s||""}).catch(s=>{t.innerHTML='<div class="error">Error al subir imagen</div>',console.error(s)})}else if(a==="button"){t.className="contenido w-full flex justify-center items-center",t.innerHTML=I().outerHTML;const i=document.getElementById("inputFileUpload").files[0],d=document.getElementById("inputBtnLink").value;var r=t.querySelector("button");i?A(r,i):d&&T(r,d)}else a==="separator"&&(t.className="contenido w-full flex justify-center",t.innerHTML=D());n.appendChild(t),n.appendChild(h(n,a)),L(n),m.classList.add("hidden")}),$.addEventListener("click",()=>y(1)),G.addEventListener("click",()=>y(2)),P.addEventListener("click",()=>y(3));function z(e,o){return[...e.querySelectorAll(".item-proyecto:not(.dragging)")].reduce((t,r)=>{const i=r.getBoundingClientRect(),d=o-i.top-i.height/2;return d<0&&d>t.offset?{offset:d,element:r}:t},{offset:Number.NEGATIVE_INFINITY}).element}function h(e,o){e.setAttribute("draggable","true"),document.addEventListener("dragstart",d=>{d.target.classList.contains("item-proyecto")&&(d.dataTransfer.effectAllowed="move",d.target.classList.add("dragging"),d.target.style.cursor="grabbing")}),document.addEventListener("dragend",d=>{d.target.classList.contains("item-proyecto")&&d.target.classList.remove("dragging")}),document.addEventListener("dragover",d=>{const s=document.querySelector(".dragging");if(!s)return;const v=d.target.closest(".Container_Data");if(v){d.preventDefault();const B=z(v,d.clientY);B==null?v.appendChild(s):v.insertBefore(s,B)}});const n=document.createElement("div");n.className="item-toolbar flex justify-between items-center";const t=document.createElement("span");t.textContent="â‹®â‹®â‹®â‹®",t.className="cursor-move text-gray-400 px-2 drag-handle";const r=document.createElement("button");r.textContent="âœï¸",r.className="btn-edit",r.addEventListener("click",d=>{if(d.stopPropagation(),l=e.querySelector(".contenido"),a=o,u.innerHTML="",o==="text"){const s=l.querySelector(".Container-Text");q(u,s)}else if(o==="image"){const s=l.querySelector("img");N(u,s)}else o==="button"?S(u,l.querySelector("button")):a==="separator"&&k(u,l.querySelector("hr, div"));m.classList.remove("hidden"),b.textContent="Actualizar"});const i=document.createElement("button");return i.textContent="ðŸ—‘ï¸",i.className="btn-delete",i.addEventListener("click",d=>{d.stopPropagation(),console.log(e),console.log(e),e.querySelector("img")?(console.log(e.querySelector("img").getAttribute("data-id")),W(e.querySelector("img").getAttribute("data-id"))):e.querySelector("button")&&R(e.querySelector("button").getAttribute("data-id")),e.remove()}),n.appendChild(t),n.appendChild(r),n.appendChild(i),n}function x(e){const o=document.createElement("div");o.className="box-toolbar flex justify-end items-center gap-2 p-1";const n=document.createElement("button");n.textContent="â¬†ï¸",n.addEventListener("click",()=>{const i=e.previousElementSibling;i&&e.parentNode.insertBefore(e,i)});const t=document.createElement("button");t.textContent="â¬‡ï¸",t.addEventListener("click",()=>{const i=e.nextElementSibling;i&&e.parentNode.insertBefore(i,e)});const r=document.createElement("button");return r.textContent="ðŸ—‘ï¸",r.addEventListener("click",()=>{e.remove()}),o.appendChild(n),o.appendChild(t),o.appendChild(r),o}window.pageId=document.getElementById("btnGuardar").dataset.pageId;const C=document.getElementById("btnGuardar");C&&C.addEventListener("click",e=>Y(e,{download:!1,post:!1}))});
